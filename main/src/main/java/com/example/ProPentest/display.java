package com.example.ProPentest;

import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

import java.io.IOException;

public class display extends AppCompatActivity {

    TextView tv1, tv2, tv3, tv4, tv5, tv6, tv7, tv8;
    String st, st1, st2, st3, st4, st5, st6, st7;
    String myUri;
    ImageView iv;

    private static final int STORAGE_CODE = 1000;
    private LinearLayout llPdf;
    private Bitmap bitmap, bmp;
    private int PICK_IMAGE_REQUEST = 1;





    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate ( savedInstanceState );
        setContentView ( R.layout.activity_display );


        tv1 = findViewById ( R.id.company_name );
        tv2 = findViewById ( R.id.date );
        tv3 = findViewById ( R.id.assettext );
        tv4 = findViewById ( R.id.reprotext );
        tv5 = findViewById ( R.id.notetext );
        tv6 = findViewById ( R.id.basevultext );
        tv7 = findViewById ( R.id.likelitext );
        tv8 = findViewById ( R.id.priotext );
        iv = findViewById ( R.id.imageView2 );


        st = getIntent ( ).getExtras ( ).getString ( "Name" );
        tv1.setText ( st );
        st1 = getIntent ( ).getExtras ( ).getString ( "Date" );
        tv2.setText ( st1 );
        st2 = getIntent ( ).getExtras ( ).getString ( "Asset" );
        tv3.setText ( st2 );
        st3 = getIntent ( ).getExtras ( ).getString ( "Repro" );
        tv4.setText ( st3 );
        st4 = getIntent ( ).getExtras ( ).getString ( "Note" );
        tv5.setText ( st4 );
        st5 = getIntent ( ).getExtras ( ).getString ( "Spinner" );
        tv6.setText ( st5 );
        st6 = getIntent ( ).getExtras ( ).getString ( "Spinner2" );
        tv7.setText ( st6 );
        st7 = getIntent ( ).getExtras ( ).getString ( "Spinner3" );
        tv8.setText ( st7 );
        //bmp = getIntent().getExtras().getParcelable("imageView2");
        //iv.setImageBitmap( bmp );

        Button selectImage = findViewById ( R.id.uploadImage );

        selectImage.setOnClickListener ( new View.OnClickListener ( ) {


            @Override
            public void onClick(View v) {

                chooseImage ( );
                bmp = iv.getDrawingCache ( );
                Intent i = new Intent ( );
                i.putExtra ( "imageView2" , bmp );

            }

            private void chooseImage() {
                Intent intent = new Intent ( );
                intent.setType ( "image/*" );
                intent.setAction ( Intent.ACTION_GET_CONTENT );
                startActivityForResult ( Intent.createChooser ( intent , "Select Picture" ) ,
                        PICK_IMAGE_REQUEST );
                }


               }
               );
             }


          protected void onActivityResult(int requestCode , int resultCode , @Nullable Intent data) {
               super.onActivityResult ( requestCode , resultCode , data );

               if (requestCode == PICK_IMAGE_REQUEST && resultCode == RESULT_OK && data != null && data.getData ( ) != null) {

                 Uri uri = data.getData ( );

                try {
                Bitmap bitmap = MediaStore.Images.Media.getBitmap ( getContentResolver ( ) , uri );
                // Log.d(TAG, String.valueOf(bitmap));

                ImageView imageView = findViewById ( R.id.imageView2 );
                imageView.setImageBitmap ( bitmap );
                //  Intent intent;
                //  intent = new Intent(form2.this,display.class);
                //  intent.putExtra("imageUri", uri.toString());
                //  startActivity(intent);
            } catch (IOException e) {
                e.printStackTrace ( );
            }}}}



